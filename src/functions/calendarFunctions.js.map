{"version":3,"file":"calendarFunctions.js","sourceRoot":"","sources":["calendarFunctions.ts"],"names":[],"mappings":";;AAAA,iDAA0C;AAE7B,QAAA,kBAAkB,GAAG,CAAC,MAAc,EAAE,EAAE;IACnD,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,sBAAY,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AAC/F,CAAC,CAAA;AAEY,QAAA,iBAAiB,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IAC3D,MAAM,oBAAoB,GAAG,oCAA4B,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IACnF,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,sBAAY,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,EAAE,sBAAY,CAAC,iBAAiB,CAAC,EAAE,CAAC,KAAK,EAAE,sBAAY,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;IACrJ,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,oBAAoB,CAAC,CAAC;IACxD,OAAO,MAAM,CAAC;AAChB,CAAC,CAAA;AAEY,QAAA,4BAA4B,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IACtE,IAAI,MAAM,GAAG,sBAAY,CAAC,SAAS,IAAI,MAAM,GAAG,sBAAY,CAAC,SAAS,EAAE;QACtE,OAAO,IAAI,CAAC;KACb;IAED,IAAI,oBAAoB,GAAG,CAAC,CAAC;IAC7B,MAAM,SAAS,GAAG,MAAM,GAAG,sBAAY,CAAC,SAAS,CAAC;IAClD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE;QACxC,IAAI,KAAK,GAAG,OAAO,EAAE;YACnB,oBAAoB,IAAI,oCAA4B,CAAC,KAAK,EAAE,SAAS,GAAG,CAAC,CAAC,CAAC;SAC5E;aAAM;YACL,oBAAoB,IAAI,oCAA4B,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;SACxE;KACF;IAED,IAAI,MAAM,GAAG,IAAI,IAAI,MAAM,GAAG,IAAI,EAAE;QAClC,oBAAoB,IAAI,MAAM,GAAG,CAAC,CAAC;KACpC;SAAM,IAAI,MAAM,KAAK,IAAI,IAAI,OAAO,GAAG,CAAC,EAAE;QACzC,oBAAoB,IAAI,MAAM,GAAG,CAAC,CAAC;KACpC;SAAM,IAAI,MAAM,GAAG,IAAI,EAAE;QACxB,oBAAoB,IAAI,MAAM,GAAG,CAAC,CAAC;KACpC;SAAM,IAAI,MAAM,KAAK,IAAI,IAAI,OAAO,GAAG,CAAC,EAAE;QACzC,oBAAoB,IAAI,MAAM,GAAG,CAAC,CAAC;KACpC;SAAM;QACL,oBAAoB,IAAI,MAAM,CAAC;KAChC;IAED,OAAO,oBAAoB,CAAC;AAC9B,CAAC,CAAA;AAEY,QAAA,4BAA4B,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE;IAChE,IAAI,SAAS,GAAG,CAAC,CAAC;IAClB,IAAI,sBAAsB,GAAG,CAAC,CAAC;IAC/B,IAAI,QAAQ,KAAK,CAAC;QAAE,OAAO,CAAC,CAAC;IAE7B,MAAM,WAAW,GAAG,sBAAY,CAAC,oBAAoB,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;IACnE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC3C,IAAI,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;YACxB,SAAS;SACV;QACD,MAAM,qBAAqB,GAAG,CAAC,GAAG,CAAC,CAAC;QACpC,IAAI,QAAQ,GAAG,SAAS,GAAG,WAAW,CAAC,CAAC,CAAC,EAAE;YACzC,SAAS,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC;YAC5B,sBAAsB,IAAI,sBAAY,CAAC,gBAAgB,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,qBAAqB,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;SAC9G;aAAM;YACL,sBAAsB,IAAI,sBAAY,CAAC,gBAAgB,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,qBAAqB,CAAC,GAAG,CAAC,QAAQ,GAAG,SAAS,CAAC,CAAC;YACrH,SAAS,GAAG,QAAQ,GAAG,SAAS,CAAC;YACjC,MAAM;SACP;KACF;IAED,OAAO,sBAAsB,CAAC;AAChC,CAAC,CAAA;AAEY,QAAA,cAAc,GAAG,CAAC,MAAc,EAAE,OAAe,EAAE,EAAE;IAChE,IAAI,SAAS,GAAG,CAAC,CAAC;IAClB,MAAM,UAAU,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,sBAAY,CAAC,SAAS,CAAC;IACzD,MAAM,WAAW,GAAG,sBAAY,CAAC,oBAAoB,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;IACnE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC3C,IAAI,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;YACxB,SAAS;SACV;QAED,MAAM,qBAAqB,GAAG,CAAC,GAAG,CAAC,CAAC;QACpC,SAAS,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,UAAU,IAAI,SAAS,EAAE;YAC3B,IAAI,CAAC,MAAM,KAAK,IAAI,IAAI,OAAO,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,IAAI,IAAI,OAAO,KAAK,CAAC,CAAC,EAAE;gBAC5E,OAAO,sBAAY,CAAC,gBAAgB,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,qBAAqB,CAAC,GAAG,CAAC,CAAC;aAC9E;iBAAM;gBACL,OAAO,sBAAY,CAAC,gBAAgB,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC;aAC1E;SACF;KACF;IAED,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEW,QAAA,iBAAiB,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IAE3D,IAAI,MAAM,GAAG,MAAM,GAAG,EAAE,CAAC;IACzB,IAAI,OAAO,GAAG,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;IACjC,OAAO,GAAG,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC;IACvC,IAAI,MAAM,GAAG,CAAC,CAAC;IAEf,IAAI,OAAO,GAAG,CAAC,EAAE;QACf,MAAM,IAAI,CAAC,CAAC;KACb;IAED,MAAM,kBAAkB,GAAG,yBAAiB,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;IACjE,IAAI,MAAM,IAAI,CAAC,IAAI,MAAM,GAAG,kBAAkB,CAAC,OAAO,EAAE,EAAE;QACxD,IAAI,OAAO,KAAK,CAAC,EAAE;YACjB,MAAM,iBAAiB,GAAG,yBAAiB,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAC1D,IAAI,MAAM,GAAG,iBAAiB,CAAC,OAAO,EAAE,EAAE;gBACxC,MAAM,IAAI,CAAC,CAAC;aACb;SACF;QACD,OAAO,GAAG,CAAC,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC7C,MAAM,WAAW,GAAG,sBAAc,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QACpD,MAAM,GAAG,WAAW,GAAG,CAAC,kBAAkB,CAAC,OAAO,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;KACpE;SAAM;QACL,MAAM,GAAG,MAAM,GAAG,kBAAkB,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;KACpD;IAED,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC;AACrC,CAAC,CAAA","sourcesContent":["import calendarData from './calendarData';\n\nexport const toDevanagariDigits = (number: number) => {\n  return String(number).split('').map((ed) => calendarData.nepaliNumbers[Number(ed)]).join('');\n}\n\nexport const getAdDateByBsDate = (bsYear, bsMonth, bsDate) => {\n  const daysNumFromMinBsYear = getTotalDaysNumFromMinBsYear(bsYear, bsMonth, bsDate);\n  const adDate = new Date(calendarData.minAdDateEqBsDate.ad.year, calendarData.minAdDateEqBsDate.ad.month, calendarData.minAdDateEqBsDate.ad.date - 1);\n  adDate.setDate(adDate.getDate() + daysNumFromMinBsYear);\n  return adDate;\n}\n\nexport const getTotalDaysNumFromMinBsYear = (bsYear, bsMonth, bsDate) => {\n  if (bsYear < calendarData.minBsYear || bsYear > calendarData.maxBsYear) {\n    return null;\n  }\n\n  let daysNumFromMinBsYear = 0;\n  const diffYears = bsYear - calendarData.minBsYear;\n  for (let month = 1; month <= 12; month++) {\n    if (month < bsMonth) {\n      daysNumFromMinBsYear += getMonthDaysNumFormMinBsYear(month, diffYears + 1);\n    } else {\n      daysNumFromMinBsYear += getMonthDaysNumFormMinBsYear(month, diffYears);\n    }\n  }\n\n  if (bsYear > 2085 && bsYear < 2088) {\n    daysNumFromMinBsYear += bsDate - 2;\n  } else if (bsYear === 2085 && bsMonth > 5) {\n    daysNumFromMinBsYear += bsDate - 2;\n  } else if (bsYear > 2088) {\n    daysNumFromMinBsYear += bsDate - 4;\n  } else if (bsYear === 2088 && bsMonth > 5) {\n    daysNumFromMinBsYear += bsDate - 4;\n  } else {\n    daysNumFromMinBsYear += bsDate;\n  }\n\n  return daysNumFromMinBsYear;\n}\n\nexport const getMonthDaysNumFormMinBsYear = (bsMonth, yearDiff) => {\n  let yearCount = 0;\n  let monthDaysFromMinBsYear = 0;\n  if (yearDiff === 0) return 0;\n\n  const bsMonthData = calendarData.extractedBsMonthData[bsMonth - 1];\n  for (let i = 0; i < bsMonthData.length; i++) {\n    if (bsMonthData[i] === 0) {\n      continue;\n    }\n    const bsMonthUpperDaysIndex = i % 2;\n    if (yearDiff > yearCount + bsMonthData[i]) {\n      yearCount += bsMonthData[i];\n      monthDaysFromMinBsYear += calendarData.bsMonthUpperDays[bsMonth - 1][bsMonthUpperDaysIndex] * bsMonthData[i];\n    } else {\n      monthDaysFromMinBsYear += calendarData.bsMonthUpperDays[bsMonth - 1][bsMonthUpperDaysIndex] * (yearDiff - yearCount);\n      yearCount = yearDiff - yearCount;\n      break;\n    }\n  }\n\n  return monthDaysFromMinBsYear;\n}\n\nexport const getBsMonthDays = (bsYear: number, bsMonth: number) => {\n  let yearCount = 0;\n  const totalYears = (bsYear + 1) - calendarData.minBsYear;\n  const bsMonthData = calendarData.extractedBsMonthData[bsMonth - 1];\n  for (let i = 0; i < bsMonthData.length; i++) {\n    if (bsMonthData[i] === 0) {\n      continue;\n    }\n\n    const bsMonthUpperDaysIndex = i % 2;\n    yearCount += bsMonthData[i];\n    if (totalYears <= yearCount) {\n      if ((bsYear === 2085 && bsMonth === 5) || (bsYear === 2088 && bsMonth === 5)) {\n        return calendarData.bsMonthUpperDays[bsMonth - 1][bsMonthUpperDaysIndex] - 2;\n      } else {\n        return calendarData.bsMonthUpperDays[bsMonth - 1][bsMonthUpperDaysIndex];\n      }\n    }\n  }\n\n  return null;\n};\n\nexport const getBsDateByAdDate = (adYear, adMonth, adDate) => {\n\n  let bsYear = adYear + 57;\n  let bsMonth = (adMonth + 9) % 12;\n  bsMonth = bsMonth === 0 ? 12 : bsMonth;\n  let bsDate = 1;\n\n  if (adMonth < 4) {\n    bsYear -= 1;\n  }\n\n  const bsMonthFirstAdDate = getAdDateByBsDate(bsYear, bsMonth, 1);\n  if (adDate >= 1 && adDate < bsMonthFirstAdDate.getDate()) {\n    if (adMonth === 4) {\n      const bsYearFirstAdDate = getAdDateByBsDate(bsYear, 1, 1);\n      if (adDate < bsYearFirstAdDate.getDate()) {\n        bsYear -= 1;\n      }\n    }\n    bsMonth = (bsMonth !== 1) ? bsMonth - 1 : 12;\n    const bsMonthDays = getBsMonthDays(bsYear, bsMonth);\n    bsDate = bsMonthDays - (bsMonthFirstAdDate.getDate() - adDate) + 1;\n  } else {\n    bsDate = adDate - bsMonthFirstAdDate.getDate() + 1;\n  }\n\n  return { bsYear, bsMonth, bsDate };\n}"]}