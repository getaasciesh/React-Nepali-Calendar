{"version":3,"file":"MonthView.js","sourceRoot":"","sources":["MonthView.tsx"],"names":[],"mappings":"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","sourcesContent":["\nimport { styles } from './Calendar.css';\nimport * as React from 'react';\nimport calendarData from '../functions/calendarData';\nimport * as calFns from '../functions/calendarFunctions';\nimport injectSheet from 'react-jss';\n\ninterface MonthViewProps {\n  onDayClicked: (date: Date) => void\n  viewBsYear: number\n  viewBsMonth: number\n  defaultActiveDate: Date\n  classes: any\n}\n\ninterface MonthViewState {\n  selectedDate: Date;\n}\n\nclass MonthView extends React.Component<MonthViewProps, MonthViewState> {\n\n  public state = { selectedDate: new Date() };\n\n  private getDayInfo(date: Date) {\n    const bsDate = calFns.convertADtoBS(date.getFullYear(), date.getMonth() + 1, date.getDate());\n    return { adDate: new Date(date), ...(bsDate) }\n  }\n\n  private getDays() {\n    let startDay, lastDay;\n    const { viewBsMonth, viewBsYear } = this.props;\n    startDay = calFns.convertBStoAD(viewBsYear, viewBsMonth, 1);\n    startDay.setDate(startDay.getDate() - startDay.getDay()); // Sunday, the first day in the view\n    lastDay = calFns.convertBStoAD(viewBsYear, viewBsMonth, calFns.getBsMonthDays(viewBsYear, viewBsMonth));\n    lastDay.setDate(lastDay.getDate() + (6 - lastDay.getDay())); // Saturday, the last day in the view\n    const days = [];\n    while (startDay <= lastDay) {\n      days.push(this.getDayInfo(startDay));\n      startDay.setDate(startDay.getDate() + 1)\n    }\n    return days;\n  }\n\n  private isSameDate(adDate: Date, toMatch: Date = new Date()) {\n    return adDate.getDate() == toMatch.getDate() &&\n      adDate.getMonth() == toMatch.getMonth() &&\n      adDate.getFullYear() == toMatch.getFullYear();\n  }\n\n  private onDaySelect(date: Date) {\n    this.setState({ selectedDate: date });\n    this.props.onDayClicked(date);\n  }\n\n  public render(): JSX.Element {\n    const { classes } = this.props;\n    return (\n      <div className={`r-n-cal-month-view ${classes.calendar}`}>\n        <div className={`r-n-cal-weekdays ${classes.weekdays}`}>\n          {\n            calendarData.bsDays.map((day) => (\n              <div key={day} className={classes.weekday}>{day}</div>\n            ))\n          }\n        </div>\n        <div className={classes.days}>\n          {\n            this.getDays().map(({ adDate, bsDate, bsMonth }) => (\n              <div\n                className={\n                  `${classes.day} ${bsMonth !== this.props.viewBsMonth ? classes.dayMuted : ''} \n                  ${this.isSameDate(adDate) ? classes.today : ''} \n                  ${this.isSameDate(adDate, this.state.selectedDate) ? classes.selectedDay : ''} \n                  `\n                }\n                key={`${bsDate} ${bsMonth}`}\n                onClick={() => this.onDaySelect(adDate)}>\n                {calFns.toDevanagariDigits(bsDate)}\n              </div>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectSheet(styles)(MonthView);"]}